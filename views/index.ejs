<!DOCTYPE html>
<html lang="pt-Br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Delivery - CLIENTE</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="/css/style-index.css" />
  </head>
  <body id="body">
    <% if(status == false){ %>
    <div id="modal-fechado">
      <div class="container-fechado">
        <img src="/imgs/desligar.png" alt="" />
        <h2>ESTAMOS FECHADOS!</h2>
        <h3>Em breve estaremos de volta!</h3>
      </div>
    </div>
    <% } %>

    <div id="spinner-container" class="">
      <div id="spinner"></div>
    </div>

    <nav class="navbar">
      <h1>DELIVERY</h1>

      <div>
        <i class="bi bi-cart2" onclick="toggleModal('carrinho')"></i>
      </div>
    </nav>

    <nav class="nav-tempo">
      <img src="/imgs/moto.png" alt="" />
      <span>Tempo de espera: <%= tempoEspera %>min</span>
    </nav>

    <div class="menu-nav">
      <ul class="nav nav-underline flex-nowrap" style="margin-left: 0.4rem">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="#hamb-art">Hamburguer Artesanal</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" aria-current="page" href="#hamb-normal">Hamburguer Normal</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" aria-current="page" href="#acai">Açai</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" aria-current="page" href="#bebidas">Bebidas</a>
        </li>
      </ul>
    </div>

    <section class="tabela-de-items" id="hamb-art">
      <h2>Hamburguer Artesanal</h2>

      <% produtos.forEach(produto => { %> <% if(produto.tipo === 'hamburguer_artesanal') { %>
      <div id="<%=produto.nome%>" class="card-item" onclick="toggleModal('<%=produto.nome%>')">
        <div class="info-item">
          <h4 class="nome-item"><%= produto.nome %></h4>
          <p class="desc-item"><%= produto.desc %></p>
          <div class="preco-item">R$<%= produto.preco %></div>
        </div>
        <div class="img-item">
          <img src="data:<%= produto.imagemMimeType %>;base64,<%= produto.imagem %>" alt="" />
        </div>
      </div>
      <% } %> <% }) %>
    </section>
    <!-------------------------------------------------->

    <section class="tabela-de-items" id="hamb-normal">
      <h2>Hamburguer Normal</h2>

      <% produtos.forEach(produto => { %> <% if(produto.tipo === 'hamburguer_normal'){ %>
      <div id="<%=produto.nome%>" class="card-item" onclick="toggleModal('<%=produto.nome%>')">
        <div class="info-item">
          <h4 class="nome-item"><%=produto.nome %></h4>
          <p class="desc-item"><%=produto.desc %></p>
          <div class="preco-item">R$<%=produto.preco %></div>
        </div>
        <div class="img-item">
          <img src="data:<%= produto.imagemMimeType %>;base64,<%= produto.imagem%>" alt="" />
        </div>
      </div>
      <% } %> <% }) %>
    </section>

    <section class="tabela-de-items" id="acai">
      <h2>Açai</h2>

      <% produtos.forEach(produto => { %> <% if(produto.tipo === 'acai'){ %>
      <div id="<%=produto.nome%>" class="card-item" onclick="toggleModal('<%=produto.nome%>')">
        <div class="info-item">
          <h4 class="nome-item"><%=produto.nome %></h4>
          <p class="desc-item"><%=produto.desc %></p>
          <div class="preco-item">R$<%=produto.preco %></div>
        </div>
        <div class="img-item">
          <img src="data:<%= produto.imagemMimeType %>;base64,<%= produto.imagem%>" alt="" />
        </div>
      </div>
      <% } %> <% }) %>
    </section>

    <section class="tabela-de-items" id="bebidas">
      <h2>Bebidas</h2>

      <% produtos.forEach(produto => { %> <% if(produto.tipo === 'bebida'){ %>
      <div id="<%=produto.nome%>" class="card-item" onclick="toggleModal('<%=produto.nome%>')">
        <div class="info-item">
          <h4 class="nome-item"><%=produto.nome %></h4>
          <p class="desc-item"><%=produto.desc %></p>
          <div class="preco-item">R$<%=produto.preco %></div>
        </div>
        <div class="img-item">
          <img src="data:<%= produto.imagemMimeType %>;base64,<%= produto.imagem%>" alt="" />
        </div>
      </div>
      <% } %> <% }) %>
    </section>

    <!-- Modal dos produtos ---------------------------------------------------------------------------------------------------------->

    <div id="modal" class="hide"></div>

    <!--------------------------------------------------------------------------------------------------------------------------->

    <!-- Carrinho --------------------------------------------------------------------------------------------------------------->

    <div id="carrinho" class="hide">
      <div class="carrinho-header">
        <h2>Carrinho</h2>
        <button class="btn btn-danger" onclick="toggleModal('carrinho')">Voltar</button>
      </div>

      <div id="carrinho-body"></div>

      <div class="carrinho-footer">
        <div style="margin-bottom: 0.2rem">
          <h2>OBSERVAÇÕES</h2>
          <input id="observacoes" class="form-control" type="text" placeholder="Exemplo: Tirar cebola, sem maionese..." />
        </div>
        <button id="botao-finalizar-pedido" class="btn btn-success" onclick="toggleModal('modal-checkout')">Finalizar pedido - Total: R$ 0,00</button>
      </div>
    </div>

    <!--------------------------------------------------------------------------------------------------------------------------->

    <!-- Checkout --------------------------------------------------------------------------------------------------------------->

    <form id="modal-checkout" class="hide">
      <div class="header-checkout">
        <h1>DADOS PARA ENTREGA:</h1>
        <button type="button" class="btn btn-danger" onclick="toggleModal('modal-checkout')">VOLTAR</button>
      </div>
      <div class="body-checkout">
        <div id="form-checkout" class="form-group" style="align-items: start">
          <input id="nome-cliente" class="input-checkout form-control" type="text" placeholder="Nome:" required />

          <input id="telefone-cliente" class="input-checkout form-control" type="tel" placeholder="Telefone:" required />

          <input id="rua-cliente" class="input-checkout form-control" type="text" placeholder="Rua:" required />

          <input id="bairro-cliente" class="input-checkout form-control" type="text" placeholder="Bairro:" required />

          <input id="numero-cliente" class="input-checkout form-control" type="number" placeholder="Numero:" required />

          <input id="complemento-cliente" class="input-checkout form-control" type="text" placeholder="Complemento:" required />

          <label style="margin: 0.4rem; padding: 0.4rem" for="forma-pagamento">Forma de Pagamento</label>
          <div style="display: flex; padding: 0.4rem; margin: 0.4rem">
            <select id="forma-pagamento" class="form-control" style="width: 50%; margin-right: 5px" name="forma-pagamento" onchange="habilitar_troco()" required>
              <option selected disabled>Selecionar</option>
              <option value="cartao-credito">Cartão de Crédito</option>
              <option value="cartao-debito">Cartão de Débito</option>
              <option value="dinheiro">Dinheiro</option>
              <option value="pix">Pix</option>
            </select>
            <input class="hide" id="troco" type="number" placeholder="Troco para R$:" disabled style="margin-right: 5px; width: 50%; border-top: none; border-left: none; border-right: none; border-bottom: solid 1px rgb(222, 226, 230)" />
          </div>
        </div>
      </div>
      <div class="footer-checkout">
        <button type="button" id="botao-enviar-pedido" class="btn btn-success" onclick="criarPedido('modal-checkout', 'carrinho')">ENVIAR PEDIDO</button>
      </div>
    </form>

    <!--------------------------------------------------------------------------------------------------------->

    <!-- Tela finalização ------------------------------------------------------------------------------------->

    <div id="modal-pedido-finalizado" class="hide">
      <div class="container-check">
        <img src="/imgs/check.png" alt="" />
        <h2>PEDIDO CONCLUÍDO!</h2>
      </div>
      <a href="/">VOLTAR PARA A TELA INICIAL</a>
    </div>

    <!--------------------------------------------------------------------------------------------------------->

    <script src="/javascript/script-index.js"></script>
  </body>
</html>
